{"version":3,"sources":["assets/logo.svg","pages/Home/index.tsx","services/api.ts","pages/CreatePoint/index.tsx","routes.tsx","App.tsx","index.tsx"],"names":["module","exports","Home","id","className","src","logo","alt","to","api","axios","create","baseURL","CreatePoint","useState","items","setItems","ufs","setUfs","cities","setCities","name","email","whatsapp","formData","setFormData","selectedUf","setSelectedUf","selectedCity","setSelectedCity","selectedItems","setSelectedItems","selectedPosition","setSelectedPosition","initialPosition","setInitialPosition","history","useHistory","handleInputChange","event","target","value","useEffect","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","get","then","response","data","ufInitials","map","uf","sigla","cityNames","city","nome","onSubmit","preventDefault","items_ids","post","alert","push","htmlFor","type","onChange","Map","center","zoom","onClick","latlng","lat","lng","TileLayer","attribution","url","Marker","key","item","idSelected","findIndex","idItem","filteredItems","filter","handleSelectedItem","includes","image_url","title","Routes","component","path","exact","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.02d2764c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.47c4581a.svg\";","import React from 'react';\r\nimport { FiLogIn } from 'react-icons/fi';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './styles.css';\r\nimport logo from '../../assets/logo.svg';\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div id=\"page-home\">\r\n            <div className=\"content\">\r\n                <header>\r\n                    <img src={logo} alt=\"Ecoleta\"/>\r\n                </header>\r\n\r\n                <main>\r\n                    <h1>Seu marketplace de coleta de resíduos</h1>\r\n                    <p>Ajudamos pessoas a encontrarem pontos de coleta de forma eficiente</p>\r\n\r\n                    <Link to=\"/create-point\">\r\n                        <span>\r\n                            <FiLogIn/>\r\n                        </span>\r\n                        <strong>Cadastre um ponto de coleta</strong>\r\n                    </Link>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\nexport default Home;","import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://cafezinho.sytes.net:3333'\r\n});\r\nexport default api;","import React, { useEffect, useState, ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { FiArrowLeft } from 'react-icons/fi'\r\nimport { Map, TileLayer, Marker } from 'react-leaflet';\r\nimport { LeafletMouseEvent } from 'leaflet';\r\nimport axios from 'axios';\r\nimport api from '../../services/api';\r\n\r\nimport './styles.css';\r\nimport logo from '../../assets/logo.svg';\r\n\r\ninterface Item { id : number, title : string, image_url : string };\r\n\r\ninterface IBGEResponse { sigla : string, nome : string };\r\n\r\nconst CreatePoint = () => {\r\n    const [items, setItems] = useState<Item[]>([]);\r\n    \r\n    const [ufs, setUfs] = useState<string[]>([]);\r\n    const [cities, setCities] = useState<string[]>([]);\r\n\r\n    const [formData, setFormData] = useState({\r\n       name: '',\r\n       email: '',\r\n       whatsapp: '', \r\n    });\r\n\r\n    const [selectedUf, setSelectedUf] = useState('0');\r\n    const [selectedCity, setSelectedCity] = useState('0');\r\n    const [selectedItems, setSelectedItems] = useState<number[]>([]);\r\n    const [selectedPosition, setSelectedPosition] = useState<[number, number]>([0,0]);\r\n    \r\n    const [initialPosition, setInitialPosition] = useState<[number, number]>([0,0]);\r\n\r\n    const history = useHistory();\r\n    \r\n    useEffect(() => {\r\n        navigator.geolocation.getCurrentPosition(position => {\r\n            const { latitude, longitude } = position.coords;\r\n            setInitialPosition( [latitude, longitude] );\r\n        })\r\n    },[]);\r\n\r\n    useEffect(() => {   \r\n        api.get('items').then( response => {\r\n            setItems(response.data);\r\n        });\r\n    }, []);\r\n    \r\n    useEffect(() => {   \r\n        axios.get<IBGEResponse[]>('https://servicodados.ibge.gov.br/api/v1/localidades/estados').then( response => {\r\n            const ufInitials : string[] = response.data.map(uf => uf.sigla);\r\n            setUfs(ufInitials);\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if(selectedUf === '0'){return}\r\n        axios.get<IBGEResponse[]>(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${selectedUf}/municipios`)\r\n            .then(response => {\r\n                const cityNames : string[] = response.data.map(city => city.nome);\r\n                setCities(cityNames);\r\n            })\r\n    }, [selectedUf]);\r\n\r\n    function handleSelectUf(event : ChangeEvent<HTMLSelectElement>) {\r\n        const uf : string = event.target.value;\r\n        setSelectedUf(uf);\r\n    };\r\n\r\n    function handleSelectCity(event : ChangeEvent<HTMLSelectElement>) {\r\n        const city : string = event.target.value;\r\n        setSelectedCity(city);\r\n    };\r\n\r\n    function handleMapClick(event : LeafletMouseEvent) {\r\n        setSelectedPosition([\r\n            event.latlng.lat,\r\n            event.latlng.lng\r\n        ]);\r\n    };\r\n\r\n    function handleInputChange(event : ChangeEvent<HTMLInputElement>) {\r\n        //event.target possui o parametro 'name' e 'value' de um input\r\n        const { name, value } = event.target; \r\n        //passando [name] entre [] ele substitui o nome da propriedade no objeto js pelo valor da variavel\r\n        setFormData({...formData, [name]: value}); \r\n    }\r\n\r\n    function handleSelectedItem(idSelected : number){\r\n        const alreadySelectedIndex : number = selectedItems.findIndex(idItem => idItem === idSelected);\r\n\r\n        if(alreadySelectedIndex >= 0){\r\n            const filteredItems : number[] = selectedItems.filter(idItem => idItem !== idSelected);\r\n            setSelectedItems(filteredItems);\r\n        } else {\r\n            setSelectedItems([...selectedItems, idSelected]);\r\n        }\r\n    }\r\n\r\n    function handleSubmit(event: FormEvent) {\r\n        event.preventDefault();\r\n\r\n        const { name, email, whatsapp } = formData;\r\n        const uf : string = selectedUf;\r\n        const city : string = selectedCity;\r\n        const [latitude, longitude] = selectedPosition;\r\n        const items_ids : number[] = selectedItems;\r\n        const data = {\r\n            name,\r\n            email,\r\n            whatsapp,\r\n            uf,\r\n            city,\r\n            latitude,\r\n            longitude,\r\n            items_ids\r\n        };\r\n\r\n        api.post('points', data);\r\n        alert('Ponto de coleta registrado');\r\n\r\n        history.push('/'); //manda o usuário de volta pra home\r\n    }\r\n\r\n    return (\r\n        <div id=\"page-create-point\">\r\n            <header>\r\n                <img src={logo} alt=\"Ecoleta\"/>\r\n\r\n                <Link to=\"/\">\r\n                    <FiArrowLeft />\r\n                    Voltar para home\r\n                </Link>\r\n            </header>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <h1>\r\n                    Cadastro <br />\r\n                    pontos de coleta.\r\n                </h1>\r\n\r\n                <fieldset>\r\n                    <legend>\r\n                        <h2>Dados</h2>\r\n                    </legend>\r\n\r\n                    <div className=\"field\">\r\n                        <label htmlFor=\"name\">Nome da entidade: </label>\r\n                        <input type=\"text\" name=\"name\" id=\"name\" onChange={handleInputChange} />\r\n                    </div>\r\n\r\n                    <div className=\"field-group\">\r\n                        <div className=\"field\">\r\n                            <label htmlFor=\"email\">E-mail: </label>\r\n                            <input type=\"email\" name=\"email\" id=\"email\" onChange={handleInputChange} />\r\n                        </div>\r\n                        <div className=\"field\">\r\n                            <label htmlFor=\"whatsapp\">Whatsapp: </label>\r\n                            <input type=\"text\" name=\"whatsapp\" id=\"whatsapp\" onChange={handleInputChange} />\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n                \r\n                <fieldset>\r\n                    <legend>\r\n                        <h2>Endereço</h2>\r\n                        <span>Selecione o endereço no mapa</span>\r\n                    </legend>\r\n\r\n                    <Map center={initialPosition} zoom={15} onClick={handleMapClick}>\r\n                        <TileLayer\r\n                            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                        />\r\n                        <Marker position={selectedPosition} />\r\n                    </Map>\r\n\r\n                    <div className=\"field-group\">\r\n                        <div className=\"field\">\r\n                            <label htmlFor=\"uf\">Estado: </label>\r\n                            <select \r\n                              name=\"uf\"\r\n                              id=\"uf\"\r\n                              value={selectedUf}\r\n                              onChange={handleSelectUf}\r\n                            >\r\n                                <option value=\"0\"> Selectione um UF</option>\r\n                                {ufs.map( uf => (\r\n                                    <option key={uf} value={uf}>{uf}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"field\">\r\n                            <label htmlFor=\"city\">Cidade: </label>\r\n                            <select \r\n                              name=\"city\"\r\n                              id=\"city\" \r\n                              value={selectedCity}\r\n                              onChange={handleSelectCity}\r\n                            >\r\n                                <option value=\"0\"> Selectione um cidade</option>\r\n                                {cities.map( city => (\r\n                                    <option key={city} value={city}>{city}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n                \r\n                <fieldset>\r\n                    <legend>\r\n                        <h2>ìtens de coleta</h2>\r\n                    </legend>\r\n                    <ul className=\"items-grid\">\r\n                        {items.map(item => (\r\n                                                        //Para passar parametro em função no html\r\n                                                        //usa-se função anonima pra que ela não seja executada\r\n                                                        //assim que carrega a página\r\n                            <li \r\n                              key={item.id} \r\n                              onClick={() => handleSelectedItem(item.id)}\r\n                                        //checa se o array de itens selecionados possui o id desse item dentro\r\n                              className={selectedItems.includes(item.id) ? 'selected' : ''} \r\n                            > \r\n                                <img src={item.image_url} alt={item.title}/>\r\n                                <span>{item.title}</span>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </fieldset>\r\n                \r\n                <button>Cadastrar ponto de coleta</button>\r\n            </form>\r\n        </div>\r\n)}\r\nexport default CreatePoint;","import React from 'react';\r\nimport { Route, BrowserRouter } from 'react-router-dom';\r\n\r\nimport Home from './pages/Home';\r\nimport CreatePoint from './pages/CreatePoint';\r\n\r\nconst Routes = () => {\r\n    return (\r\n        <BrowserRouter >\r\n            <Route component={Home} path=\"/\" exact />\r\n            <Route component={Home} path=\"/Ecoleta\"/>\r\n            <Route component={CreatePoint} path=\"/Ecoleta/create-point\" />\r\n        </BrowserRouter>\r\n    )\r\n};\r\nexport default Routes;","import React from 'react';\r\nimport Routes from './routes';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Routes />\r\n    </div>\r\n  );\r\n}\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}